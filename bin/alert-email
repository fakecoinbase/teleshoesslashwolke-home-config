#!/usr/bin/perl
use strict;
use warnings;
use Time::HiRes qw(sleep);

my $SOUND_DELAY_MILLIS = 350;

my $usage = "Usage:
  $0 ACC_NAME
    play alert sounds for emails
";

sub main(@){
  my ($accName) = @_;
  die $usage if not defined $accName;

  if($accName =~ "G"){
    system "alert", "jumpdown";
  }elsif($accName =~ "L"){
    system "alert", "jumpup";
    my $meFilter = "me";
    my $me = `email-search.pl --filter --match --new-unread L me`;
    if($me =~ /yes/){
      sleep ($SOUND_DELAY_MILLIS / 1000.0);
      system "alarm", "-s", "--volume", "80", "ff7-menuselect";
    }
  }
}

&main(@ARGV);
